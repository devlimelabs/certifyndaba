<div class="flex flex-row items-start justify-center pt-8 px-6 lg:px-0 h-full max-h-full overflow-y-auto">
  <form
    class="relative max-w-screen-md"
    [formGroup]="profileForm"
    (ngSubmit)="submit()"
  >
    <div class="space-y-12">
      @switch (profile?.status) {
        @case ('verified') {
          <div class="my-2">
            <div class="font-medium text-blue-600 mb-2">How your profile appears in search results:</div>
            <div class="border border-blue-600 rounded-lg w-full">
              <app-candidate-list-item
                [candidate]="profile"
                [showConnect]="false"
                class="w-full"
              ></app-candidate-list-item>
            </div>
          </div>
        }
        @case ('unverified') {
          @if (profile?.experienceLevel) {
            <div class="w-full text-center bg-blue-50 border border-blue-600 text-blue-600 rounded-md p-4 mt-4">
              <div class="text-lg font-semibold mt-2 mb-4">
                Your profile is awaiting verification, and should be verified in the next 24 hours!
              </div>
              To ensure the best experience for our users, we manually verify the credentials of all accredited
              therapists on CertifyndABA. In the meantime time, completely fill out your profile so you can be best
              matched with new opportunities!
            </div>
          } @else {
            <div class="w-full text-center bg-blue-50 border border-blue-600 text-blue-600 rounded-md p-4 mt-4">
              <div class="text-lg font-semibold mt-2 mb-4">
                Welcome to Your Certifynd
                <span class="text-purple-700 -ml-1.5">ABA</span>
                Profile!
              </div>
              <p>
                To ensure the best experience, Please completely fill out your profile. Fully completing you profile
                will ensure you get more requests that align with your experience & interests.
              </p>

              <div class="flex flex-row flex-wrap mt-4 mb-2">
                <span class="w-full text-center text-purple-700 font-bold">REMEMBER:</span>
                <span class="text-sm text-center text-purple-700">
                  Your personal information will NEVER be shared with any potential employer without your consent (via
                  accepting a direct connection request)
                </span>
              </div>
            </div>
          }
        }
        @case ('rejected') {
          <div class="w-full text-center bg-red-50 border border-red-600 text-red-600 rounded-md p-4 mt-4">
            <div class="text-lg font-semibold mt-2 mb-4">
              Your credential verification has been rejected for the following reason:
            </div>
            {{ profile.rejectionReason }}
            Please update your credential information according to the details provided. Once your credential
            information is updated and saved, your profile will be automatically resubmitted for verification!
          </div>
        }
      }

      <div class="pb-12">
        <h2
          class="text-base font-semibold leading-7 text-gray-900 flex flex-row flex-nowrap items-center justify-between"
        >
          Personal Information
          @if (profile?.status === 'verified') {
            <small
              class="border border-green-600 bg-green-50 p-1 text-green-600 rounded-lg text-sm flex flex-row items-center"
            >
              <mat-icon class="mr-2 text-green-600">check</mat-icon>
              VERIFIED
            </small>
          }
        </h2>

        <p class="mt-1 text-sm leading-6 text-gray-600">
          This information will
          <span class="font-semibold">NOT</span>
          be public. it will only be shared with companies that you choose to connect with.
        </p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          <div class="col-span-full">
            <label
              for="photo"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Photo
            </label>
            <div class="mt-2 flex items-center gap-x-3">
              <svg
                class="h-12 w-12 text-gray-300"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
                  clip-rule="evenodd"
                />
              </svg>
              <button
                type="button"
                class="rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"
              >
                Change
              </button>
            </div>
          </div>

          <div class="sm:col-span-3">
            <label
              for="first-name"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              First name
            </label>
            <div class="mt-2">
              <input
                formControlName="firstName"
                type="text"
                name="first-name"
                id="first-name"
                autocomplete="given-name"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-3">
            <label
              for="last-name"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Last name
            </label>
            <div class="mt-2">
              <input
                formControlName="lastName"
                type="text"
                name="last-name"
                id="last-name"
                autocomplete="family-name"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="col-span-full">
            <label
              for="street-address"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Street address
            </label>
            <div class="mt-2">
              <input
                formControlName="address1"
                type="text"
                name="street-address"
                id="street-address"
                autocomplete="address-line1"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>

            <div class="mt-2">
              <input
                formControlName="address2"
                type="text"
                name="street-address2"
                id="street-address2"
                autocomplete="address-line2"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-2 sm:col-start-1">
            <label
              for="city"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              City
            </label>
            <div class="mt-2">
              <input
                formControlName="city"
                type="text"
                name="city"
                id="city"
                autocomplete="address-level2"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="region"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              State / Province
            </label>
            <div class="mt-2">
              <select
                formControlName="state"
                id="state"
                name="state"
                autocomplete="address-level1"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option
                  *ngFor="let state of states"
                  [value]="state"
                >
                  {{ state }}
                </option>
              </select>
            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="postal-code"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              ZIP / Postal code
            </label>
            <div class="mt-2">
              <input
                formControlName="zip"
                type="text"
                name="postal-code"
                id="postal-code"
                autocomplete="postal-code"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-4">
            <label
              for="country"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Country
            </label>
            <div class="mt-2">
              <select
                formControlName="country"
                id="country"
                name="country"
                autocomplete="country-name"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option>United States</option>
                <option>Canada</option>
                <option>Mexico</option>
              </select>
            </div>
          </div>

          <div class="sm:col-span-3">
            <label
              for="email"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Email address
            </label>
            <div class="mt-2">
              <input
                formControlName="email"
                id="email"
                name="email"
                type="email"
                autocomplete="email"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-3">
            <label
              for="phone"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Phone Number
            </label>
            <div class="mt-2">
              <input
                formControlName="phone"
                id="phone"
                name="phone"
                type="tel"
                autocomplete="tel"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-full">
            <label
              for="linkedin-profile"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              LinkedIn Profile URL
            </label>
            <div class="mt-2 flex rounded-md shadow-sm">
              <span
                class="inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 sm:text-sm"
              >
                https://linkedin.com/
              </span>
              <input
                type="text"
                name="linkedin-profile"
                id="linkedin-profile"
                class="block w-full min-w-0 flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                placeholder="username"
              />
            </div>
          </div>

          <div class="sm:col-span-full">
            <label
              for="employer"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Current Employer
            </label>
            <div class="mt-2">
              <input
                formControlName="employer"
                id="employer"
                name="employer"
                type="text"
                autocomplete="organization"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-4">
            <label
              for="position"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Current Position
            </label>
            <div class="mt-2">
              <input
                formControlName="position"
                id="position"
                name="position"
                type="text"
                autocomplete="organization-title"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              />
            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="length-of-employment"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Length of Employment
            </label>
            <div class="mt-2">
              <select
                formControlName="lengthOfEmployment"
                id="length-of-employment"
                name="length-of-employment"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option value="< 1 Year">< 1 Year</option>
                <option value="1-2 Years">1-2 Years</option>
                <option value="2-3 Years">2-3 Years</option>
                <option value="3-4 Years">3-4 Years</option>
                <option value="4-5 Years">4-5 Years</option>
                <option value="5+ Years">5+ Years</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base font-semibold leading-7 text-gray-900">Candidate Profile & Interests</h2>
        <p class="mt-1 text-sm leading-6 text-gray-600">
          This information will be displayed publicly in the candidate search to our paid companies, employers, and
          recruiters.
        </p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          <div class="sm:col-span-5">
            <label
              for="experience-level"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Level of Experience
            </label>
            <div class="mt-2">
              <select
                formControlName="experienceLevel"
                id="experience-level"
                name="experience-level"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option value="NONE">No Experience</option>
                <option value="BT">Behavioral Therapist (uncertified)</option>
                <option value="RBT">Registered Behavioral Therapist (RBT)</option>
                <option value="BCaBA">Board Certified Assistant Behavior Analyst (BCaBA)</option>
                <option value="BCBA">Board Certified Behavior Analyst (BCBA)</option>
                <option value="BCBA-D">Board Certified Behavior Analyst - Doctoral (BCBA-D)</option>
              </select>
            </div>
          </div>

          <div
            *ngIf="isCertified()"
            class="sm:col-span-5 flex flex-row flex-nowrap items-center justify-between"
          >
            <app-certification-number-input
              formControlName="certificationNumber"
              [type]="profileForm.get('experienceLevel')?.value"
            ></app-certification-number-input>

            <div
              *ngIf="profile?.status === 'verified'"
              class="border border-green-600 bg-green-50 p-2 text-green-600 rounded-lg text-sm"
            >
              VERIFIED
            </div>
          </div>

          <div class="sm:col-span-5">
            <label
              for="years-of-experience"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Years of Experience
            </label>
            <div class="mt-2">
              <select
                formControlName="yearsOfExperience"
                id="years-of-experience"
                name="years-of-experience"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option value="< 1 Year">< 1 Year</option>
                <option value="1-2 Years">1-2 Years</option>
                <option value="2-3 Years">2-3 Years</option>
                <option value="3-4 Years">3-4 Years</option>
                <option value="4-5 Years">4-5 Years</option>
                <option value="5+ Years">5+ Years</option>
              </select>
            </div>
          </div>

          <div class="sm:col-span-2">
            <app-multi-checkbox
              [options]="employmentTypes"
              name="employment-types"
              label="Employment Type"
              formControlName="employmentTypes"
            ></app-multi-checkbox>
          </div>

          <div class="sm:col-span-2">
            <app-multi-checkbox
              [options]="clientPopulations"
              name="client-populations"
              label="Client Populations"
              formControlName="clientPopulations"
            ></app-multi-checkbox>
          </div>

          <div class="sm:col-span-2">
            <app-multi-checkbox
              [options]="environments"
              name="environments"
              label="Therapy Environments"
              formControlName="environments"
            ></app-multi-checkbox>
          </div>

          <div class="sm:col-start-2 sm:col-span-4">
            <label class="text-sm font-medium leading-6 text-gray-900 flex justify-between">
              <span>Minimum Salary</span>
              <span class="text-indigo-700">
                {{ profileForm.get('salary')?.value | currency: 'USD' : 'symbol' : '0.0' }}
              </span>
            </label>
            <mat-slider
              min="0"
              max="150000"
              step="500"
              discrete
              [displayWith]="formatLabel"
              class="!w-full"
            >
              <input
                matSliderThumb
                formControlName="salary"
              />
            </mat-slider>
          </div>
          <div class="sm:col-span-2">
            <label
              for="relocation"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Are you willing to relocate?
            </label>
            <div class="mt-2">
              <select
                formControlName="relocation"
                id="relocation"
                name="relocation"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option [ngValue]="true">Yes</option>
                <option [ngValue]="true">Yes - only with relocation assistance</option>
                <option [ngValue]="false">No</option>
              </select>
            </div>
          </div>

          <app-state-selector
            *ngIf="profileForm.get('relocation')?.value === true"
            formControlName="locationsOfInterest"
            class="sm:col-span-4 w-full sm:mt-4"
          ></app-state-selector>

          <div class="sm:col-start-1 sm:col-span-3">
            <label
              for="availability-status"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Availability Status
            </label>
            <div class="mt-2">
              <select
                formControlName="availabilityStatus"
                id="availability-status"
                name="availability-status"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option value="active">Actively Looking</option>
                <option value="open">Open to Opportunities</option>
                <option value="curious">Just Curious</option>
              </select>
            </div>
          </div>

          <div class="sm:col-span-3">
            <label
              for="start-date"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Start Date
            </label>
            <div class="mt-2">
              <select
                formControlName="startDate"
                id="start-date"
                name="start-date"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              >
                <option value="immediate">Immediate</option>
                <option value="twoWeeks">Within Two Weeks of Accepted Offer</option>
                <option value="negotiable">Negotiable</option>
              </select>
            </div>
          </div>

          <div class="col-span-full">
            <label
              for="about"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              About
            </label>
            <div class="mt-2">
              <textarea
                formControlName="about"
                id="about"
                name="about"
                rows="3"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
              ></textarea>
            </div>
            <p class="mt-3 text-sm leading-6 text-gray-600">
              Write a few sentences about yourself. You can use this section to stand out, by adding any personal
              accomplishments or traits, or even what you are looking for in an opportunity.
              <span class="font-medium">
                Just remember this section is public, so don't include any personal identifiable information like name
                or contact info.
              </span>
            </p>
          </div>
        </div>
      </div>

      <!-- <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base font-semibold leading-7 text-gray-900">Notifications</h2>
        <p class="mt-1 text-sm leading-6 text-gray-600">
          We'll always let you know about important changes, but you pick what else you want to hear about.
        </p>

        <div class="mt-10 space-y-10">
          <app-multi-checkbox
            label="Push Notifications"
            description="These are delivered via SMS to your mobile phone."
            [options]="notifications"
            [formControl]="pushNotificationsCtrl"
          ></app-multi-checkbox>
        </div>
      </div> -->
    </div>

    <div
      class="sticky bottom-0 bg-[#fafafa] border-t border-gray-900/10 p-4 pb-14 lg:pb-4 flex items-center justify-end gap-x-6 w-full"
    >
      <button
        type="button"
        class="text-sm font-semibold leading-6 text-gray-900"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="rounded-md px-3 py-2 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"
        [ngClass]="{
          'text-white bg-indigo-600  focus-visible:outline-indigo-600 hover:bg-indigo-500 cursor-pointer':
            profileChanged,
          'text-gray-400 bg-gray-200  focus-visible:outline-gray-200 cursor-default': !profileChanged
        }"
      >
        Save
      </button>
    </div>
  </form>
</div>
